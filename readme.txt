# VMD Renamer

## 制作者
蓮月（天羽綺良々）

## 本ツールでできること
本ツールは、vmd形式のモーションファイルにあるボーン情報を書き換えるツールです。書き換える情報は、vmdファイル内のボーンの名前とボーンの移動量の倍率変換です。（倍率変換はもちろん等倍もできます！ただ、私のモデルですと、MMDとBlenderでの長さの単位が異なるので、ボーンの移動量を100倍に設定する必要がありました）
csvファイルにボーンの対応表と倍率変換適用設定があり、お使いになるモデルなどに合わせてデフォルトで入っているcsvファイルを編集して、簡単にモーションを変換できます！

## 動作環境
実装した際の動作環境は以下の通りです。
- Windows11
- C++の基本的なライブラリ
- gccコンパイラ
- Makefile tools


## 使い方・実行例
### 下準備
まず、変換したいVMDモーションを本ツールと同じディレクトリ内に置きます。そして、同封のcsvファイルを編集していきます。
このcsvファイルはどのような構成になってるかというと、A列にVMDモーション側に入っているボーン名です。これは、MMDの命名規則に等しいと思っていいでしょう。
B列には、モーションでのボーンの移動量の倍率変換するかを設定する項目です。「1」とついた箇所は倍率変換を行い、空欄は無視されます。この「1」は、倍率変換のスケールとは関係なく、コマンドで実行する際に一括で設定するので、後ほどにもその点について説明します！
C列、D列も同じく倍率変換用です。ただし、そもそも回転もサイズも倍率変換したら違う動きになりますし、そもそもツール側で移動以外は倍率変換に対応してなかったような気がするので、スルーでOKです。（もしやりたい場合、コードを改変してもらうといいでしょう）
最後の列はE列です。これが一番重要な列です。
ここに、変換後のvmdモーションを読み込むモデルが持つボーン名のリストです。たとえば、5行目を見ると、A列にMMD「腰」、E列に「hip」という名前が入っています。これは、vmdモーションの「腰」ボーンが「hip」ボーンに改名されることになります。お使いになるモデルの命名規則に合わせて、このE列の編集を行ってもらえるとよいです。ちなみに、ボーン名を変更しない場合は、「-」を入れてください！！空欄にするとどうなるかは確認してませんが、おそらくMMDで変換後のvmdモーションを読み込むと不正なvmdファイルとして認識されるかもしれません。（仮に読み込まれたとしても、そこの部分のボーンのモーションデータは読み込まれないと思われます。）



### ターミナルでの実行
次はターミナルで実行コマンドを入力します。
現状、このバージョンでは、Visual Studio Codeのターミナルを起動し、main.cppのあるディレクトリまでアクセスし、そこでmain.cppを実行することで動作するようになっております。
このmain関数で、
　・第一引数をVMDファイルのパス
　・第二引数をcsvファイル
　・第三引数を移動量の倍率
としています。
motion.vmdをboneName.csvファイルの対応表に従ってVMDファイルのボーン名をリネームし、移動量の倍率変換は1倍にするときは、使い方の動画のようにターミナルで


./main.exe motion.vmd boneName.csv 1


等のように入力してください。

これは
（exeを実行）_（変換するvmdファイル）_（ボーンの対応表）_（移動量の変換倍率）
みたいな感じです。（_は半角の空白）
この場合、「motion.vmdをboneName.csvの対応表に従ってボーン名をリネームし、移動量を1倍にする」となっています。Blenderの環境でモーションを適用する場合は、座標の単位系によっては100倍などにする必要があります。

変換後は「result.vmd」としてvmdファイルが生成されます！
これで変換は終了です！Blenderを立ち上げて、FBXやPMXモデルを読み込み、モデルのすべてのメッシュとアーマチュアを選択し、MMD_toolsのモーション読み込みからresult.vmdを読み込んでみましょう！！

これにて完了です。お疲れさまでした！！


## 利用規約
このツールのソースコードの著作者は蓮月（天羽綺良々）であり、この配布物を使用するにあたって、以下の利用規約に同意しなければならない。

--利用規約--------------------------------------------------------------
・著作者を偽っての再配布を禁止する。
・本配布物のデータの全体または一部を複製して利用したコードの商用利用の禁止。
・読み込むVMDファイルの制作者の利用規約を確認し、遵守すること。
・本データの著作者は、本データを使用することで被ったいかなる損害に対して責任を負わない。   
-----------------------------------------------------------------------


質問や要望等は以下の連絡先へ。
mail：yumemisugi3777@@gmail.com
